<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <style> 
      #tooltip {
        border-radius: 25px;
        background: lightgray; 
        position:absolute;
        display:none;
        padding: 5px;
        font-family: sans-serif;
      }
    </style>
    <script src="https://d3js.org/d3.v4.js"></script>

    <title>parallel cordinates</title>
  </head>


  <body>
    <!-- Create a div where the graph will take place -->
    <div id='tooltip'></div>

    <select id="year" onchange="changeYear(this.value)"></select>

    <div id="my_dataviz"></div>


    <script>
    //fill dropmenu degli anni 
    var select = document.getElementById("year");
    for (let i = 2012; i < 2019; i++) {
      var el = document.createElement("option");
      el.textContent = i;
      el.value = i;
      select.appendChild(el);
    }
    //-----------

    // set the dimensions and margins of the graph
    var margin = {top: 130, right: 10, bottom: 10, left: 0},
      width = 5000 - margin.left - margin.right,
      height = 400 - margin.top - margin.bottom;
    // append the svg object to the body of the page
    var svg = d3.select("#my_dataviz")
    .append("svg")
      .attr("width", width +margin.left + margin.right)
      .attr("height", height + margin.top + margin.bottom)
    .append("g")
      .attr("transform",
            "translate(" + margin.left + "," + margin.top + ")");


    //----quando cambio anno ridisegno l'intera parallel coord.
    function changeYear(year){
      svg.selectAll("*").remove();
      draw(year);
    }
    //per evitare il cross origin
    var dataset_path = "https://raw.githubusercontent.com/FrancescoArtibani97/VA-project/main/dataset1219.csv"

    function draw(year) {
      d3.csv(dataset_path, function(data){
        console.log(d3.keys(data[0]))
      })
    }
    draw(2019)//<------ first draw


    </script>
  </body>
</html>